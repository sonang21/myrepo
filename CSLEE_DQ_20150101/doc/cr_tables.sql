-- DDL Script was generated by Orange for ORACLE
-- using session 'DBADM@NPIMSSTD' on '2014/12/04 21:54:55'.

CREATE TABLE DQ_ADM.TB_DQM_RULES
(
    RULE_ID         VARCHAR2(20) NOT NULL,
    RULE_TYPE       VARCHAR2(50),
    LCLS_NM         VARCHAR2(100),
    MCLS_NM         VARCHAR2(100),
    TGT_DB_NM       VARCHAR2(50),
    TGT_TAB_NM      VARCHAR2(50),
    TGT_COL_NM      VARCHAR2(50),
    TGT_TAB_KO_NM   VARCHAR2(200),
    TGT_COL_KO_NM   VARCHAR2(200),
    CMP_DB_NM       VARCHAR2(50),
    CMP_TAB_NM      VARCHAR2(1000),
    CMP_TAB_KO_NM   VARCHAR2(2000),
    RULE_DFN        VARCHAR2(1000),
    VRFY_DFN        VARCHAR2(1000),
    ERR_PROC_DFN    VARCHAR2(1000),
    DB_N1_CONN_NM   VARCHAR2(30),
    RULE_N1_SQL     CLOB,
    DB_N2_CONN_NM   VARCHAR2(30),
    RULE_N2_SQL     CLOB,
    ERR_SAV_TAB_NM  VARCHAR2(30),
    CYCLE           VARCHAR2(10),
    RMK             VARCHAR2(200),
    USE_YN          VARCHAR2(1),
    FST_INSRT_DTM   DATE,
    FST_INSRTR_ID   VARCHAR2(20),
    LST_MDFY_DTM    DATE,
    LST_MDFYR_ID    VARCHAR2(20)
)
TABLESPACE NPIMS_DQ_DAT01
STORAGE
(
    INITIAL 64K
    NEXT 1M
)
NOCOMPRESS
LOB (RULE_N1_SQL) STORE AS BASICFILE 
(
    STORAGE
    (
        INITIAL 64K
        NEXT 1M
    )
    CHUNK 8192
    RETENTION
)
LOB (RULE_N2_SQL) STORE AS BASICFILE 
(
    STORAGE
    (
        INITIAL 64K
        NEXT 1M
    )
    CHUNK 8192
    RETENTION
);

ALTER TABLE DQ_ADM.TB_DQM_RULES
ADD CONSTRAINT PK_TB_DQM_RULES PRIMARY KEY (RULE_ID);

COMMENT ON TABLE DQ_ADM.TB_DQM_RULES IS '검증규칙';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.RULE_ID IS '규칙ID';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.RULE_TYPE IS '규칙유형';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.LCLS_NM IS '대분류';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.MCLS_NM IS '중분류';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.TGT_DB_NM IS '대상DB';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.TGT_TAB_NM IS '대상테이블';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.TGT_COL_NM IS '대상컬럼';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.TGT_TAB_KO_NM IS '대상테이블명';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.TGT_COL_KO_NM IS '대상컬럼명';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.CMP_DB_NM IS '비교DB';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.CMP_TAB_NM IS '비교테이블';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.CMP_TAB_KO_NM IS '비교테이블명';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.RULE_DFN IS '규칙정의';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.VRFY_DFN IS '검증방법';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.ERR_PROC_DFN IS '처리사항';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.DB_N1_CONN_NM IS 'DB1연결명';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.RULE_N1_SQL IS '검증1SQL';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.DB_N2_CONN_NM IS 'DB2연결명';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.RULE_N2_SQL IS '검증2SQL';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.ERR_SAV_TAB_NM IS '오류저장테이블명';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.CYCLE IS '주기';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.RMK IS '비고';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.USE_YN IS '사용여부';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.FST_INSRT_DTM IS '최초입력일시';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.FST_INSRTR_ID IS '최초입력자ID';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.LST_MDFY_DTM IS '최종수정일시';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULES.LST_MDFYR_ID IS '최종수정자ID';

CREATE SYNONYM DQ_ADM.TB_DQM_RULES2 FOR DQ_ADM.TB_DQM_RULES;



----------------------------------------------------------------------------------


-- DDL Script was generated by Orange for ORACLE
-- using session 'DBADM@NPIMSSTD' on '2014/12/04 21:57:00'.

CREATE TABLE DQ_ADM.TB_DQM_RULE_LOGS
(
    LOG_ID      VARCHAR2(30) NOT NULL,
    RULE_ID     VARCHAR2(10) NOT NULL,
    LOG_DTM     DATE NOT NULL,
    VRFY_RSLT   VARCHAR2(10),
    SQL_N1_RSLT VARCHAR2(100),
    SQL_N2_RSLT VARCHAR2(100),
    ERR_CD      VARCHAR2(100),
    ERR_MSG     VARCHAR2(1000),
    PROC_STTS   VARCHAR2(50),
    STTS_DTM    DATE,
    STRT_DTM    DATE,
    END_DTM     DATE,
    RMK         VARCHAR2(2000)
)
TABLESPACE NPIMS_DQ_DAT01
STORAGE
(
    INITIAL 64K
    NEXT 1M
)
NOCOMPRESS;

ALTER TABLE DQ_ADM.TB_DQM_RULE_LOGS
ADD CONSTRAINT PK_DQM_RULE_LOGS PRIMARY KEY (LOG_ID);

COMMENT ON TABLE DQ_ADM.TB_DQM_RULE_LOGS IS '검증로그';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULE_LOGS.LOG_ID IS '로그ID';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULE_LOGS.RULE_ID IS '규칙ID';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULE_LOGS.LOG_DTM IS '로그일시';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULE_LOGS.VRFY_RSLT IS '실행결과';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULE_LOGS.SQL_N2_RSLT IS 'SQL2결과';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULE_LOGS.ERR_CD IS '오류코드';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULE_LOGS.ERR_MSG IS '오류메시지';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULE_LOGS.PROC_STTS IS '진행상태';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULE_LOGS.STTS_DTM IS '상태일시';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULE_LOGS.STRT_DTM IS '시작일시';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULE_LOGS.END_DTM IS '종료일시';
COMMENT ON COLUMN DQ_ADM.TB_DQM_RULE_LOGS.RMK IS '비고';


-------------------------------------------------------------------------------------------------

-- DDL Script was generated by Orange for ORACLE
-- using session 'DBADM@NPIMSSTD' on '2014/12/04 21:57:29'.

CREATE TABLE DQ_ADM.TB_DQM_ERR_DAT
(
    LOG_ID      VARCHAR2(30) NOT NULL,
    SEQ         NUMBER(10) NOT NULL,
    RULE_ID     VARCHAR2(20) NOT NULL,
    LOG_DTM     DATE NOT NULL,
    TG_DB_NM    VARCHAR2(50),
    TAB_NM      VARCHAR2(50),
    COL_NM      VARCHAR2(50),
    VAL01       VARCHAR2(1000),
    VAL02       VARCHAR2(1000),
    VAL03       VARCHAR2(1000),
    VAL04       VARCHAR2(1000),
    VAL05       VARCHAR2(1000),
    VAL06       VARCHAR2(1000),
    VAL07       VARCHAR2(1000),
    VAL08       VARCHAR2(1000),
    VAL09       VARCHAR2(1000),
    VAL10       VARCHAR2(1000),
    VAL11       VARCHAR2(1000),
    VAL12       VARCHAR2(1000),
    VAL13       VARCHAR2(1000),
    VAL14       VARCHAR2(1000),
    VAL15       VARCHAR2(1000),
    VAL16       VARCHAR2(1000),
    VAL17       VARCHAR2(1000),
    VAL18       VARCHAR2(1000),
    VAL19       VARCHAR2(1000),
    VAL20       VARCHAR2(1000),
    VAL21       VARCHAR2(1000),
    VAL22       VARCHAR2(1000),
    VAL23       VARCHAR2(1000),
    VAL24       VARCHAR2(1000),
    VAL25       VARCHAR2(1000),
    VAL26       VARCHAR2(1000),
    VAL27       VARCHAR2(1000),
    VAL28       VARCHAR2(1000),
    VAL29       VARCHAR2(1000),
    VAL30       VARCHAR2(1000)
)
TABLESPACE NPIMS_DQ_DAT01
STORAGE
(
    INITIAL 64K
    NEXT 1M
)
NOCOMPRESS;

ALTER TABLE DQ_ADM.TB_DQM_ERR_DAT
ADD CONSTRAINT PK_DBM_ERR_DAT PRIMARY KEY (LOG_ID,SEQ);

COMMENT ON TABLE DQ_ADM.TB_DQM_ERR_DAT IS '검증오류데이터';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.LOG_ID IS 'LOGID';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.SEQ IS '일련번호';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.RULE_ID IS '규칙ID';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.LOG_DTM IS 'LOG일시';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.TG_DB_NM IS '대상DB';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.TAB_NM IS '대상테이블';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.COL_NM IS '대상컬럼';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL01 IS '값01';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL02 IS '값02';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL03 IS '값03';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL04 IS '값04';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL05 IS '값05';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL06 IS '값06';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL07 IS '값07';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL08 IS '값08';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL09 IS '값09';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL10 IS '값10';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL11 IS '값11';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL12 IS '값12';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL13 IS '값13';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL14 IS '값14';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL15 IS '값15';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL16 IS '값16';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL17 IS '값17';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL18 IS '값18';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL19 IS '값19';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL20 IS '값20';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL21 IS '값21';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL22 IS '값22';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL23 IS '값23';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL24 IS '값24';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL25 IS '값25';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL26 IS '값26';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL27 IS '값27';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL28 IS '값28';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL29 IS '값29';
COMMENT ON COLUMN DQ_ADM.TB_DQM_ERR_DAT.VAL30 IS '값30';
